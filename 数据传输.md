# 数据传输
## 五层模型
1. 物理层 
2. 数据链路层 
3. 网络层
4. 传输层
5. 应用层

### 物理层
物理意义上的数据传输就是0和1的信号的传输。硬件基础，村里面通网的第一步：铺光纤、扯电缆、拉双绞线。当然前提得有电。那怎么区别0，1呢？高低电频区分一下就可以。

### 数据链路层
0和1看不懂啊。需要一套规则，没有规则跟乱码没有明显区别。
#### 1. 以太网协议
标头和数据，head与data。总的叫帧，帧的大小为64-1518个字节。数据很大一个帧装不下可以分成很多个帧来传送
（装）。head的字节是固定的，他不跳动的，就是18个。但是问题又来了，谁把信息发给谁怎么区分呢？就像别人需要知道你是不是在跟他讲话，要不就没有任何意义。
#### 2. MAC地址
MAC地址就跟名字一样，但是他的名字不会重复，有48个字节，在网卡生产的时候就被唯一标识了。
#### 3. 广播与ARP协议
##### 广播
就是multicast一对多的信息传输。你在跟三个人讲话但其实只有一个人需要听的时候，你喊了那个人的名字，那个人就会知道你在跟他讲话了。其他人听到你没在跟他们讲的时候就会选择性的拒绝听你讲的内容。
##### ARP协议
前提是要处于一个子网中，不然不能ARP。怎么判断呢？
### 网络层
全球这么多计算机，比如70亿，都判断一边数据就炸了。所以需要子网络的出现来解决这个问题。情况主要有两种：
1. 如果是同一个子网，以广播的方式把信息传给对方。
2. 如果不是同一个子网，把数据发给网关，让网关进行转发。（路由器，ARP 代理，ARP Proxy）

怎么判断是不是同一个子网呢？
#### 1. IP协议
IPv4和IPv6。一般都是IPv4，IP地址由32个二进制数组成并且分成四段，总的地址范围是0.0.0.0~255.255.255.255。IP地址分为两部分，前一部分代表网络部分，后一部分代表主机部分。但网络部分和主机部分占用是不一致的，这样就可以分成更多的子网络。如何区分网络部分和主机部分呢？
##### 子网掩码
网络部分用255表示，主机部分用0表示，然后子网掩码与IP地址做and计算，也就只有都是1才会返回1 。对于二进制数来说255就是8个1，然后0就是8个0。做和预算之后1的部分依旧为1，那么其实IP的网络部分的地址是没有用改变的。这个地址可以拿出来跟别的IP比较，结果相同的话就是同一个子网，否则不是。
#### 2. ARP协议
Address Resolution Protocol\
其实还是广播，因为广播需要得到MAC地址，所以需要一个东西来帮助Host得到需要通信的那个计算机的地址。也就是根据主机的IP地址获得MAC地址。PPP，点对点网络不需要ARP因为他们不需要MAC，分别已经获取了对方的IP地址。ARP既然需要对比是不是一个子网，则可以说IP地址是已经知道的了。询问MAC的数据包用的是特殊的MAC地址。收到询问的主机会把MAC地址返回去。如果是真的MAC地址，那么不会返回MAC地址。
```
graph LR
广播-->ARP协议
```
#### 3. DNS服务器
所以IP地址是一个需要输入的东西，要不通讯就无从谈起。但是我们一般是输入域名而不是IP地址，怎么办呢？DNS服务器就帮助我们解析这些个域名然后返还IP地址给我们。\
==网络层的作用是在茫茫恒河沙中找到我们的另一个通信的计算机。==
### 传输层
数据是收到了，但是这些数据是传给谁的呢? 此时需要一个Port，通过不同的Port来区分不同的应用。比如http的port就是80，所以输入IP的时候并没有指定端口，但是写Docker的时候需要指定端口。
### 应用层
指定数据的格式规则，收到后才好解读渲染。